{"version":3,"sources":["FuryCallStack.js"],"names":["FuryCallStack","opts","this","_defaultOpts","_stack","_promiseFn","setPromiseFn","fn","FuryCall","prototype","next","push","i","hasOwnProperty","exec","result","length","call","errorCall","_$then","_$catch","then","bind","reset","exports","module","window"],"mappings":"CAAA,WAEA,QAAAA,GAAAC,GAGAC,KAAAC,aAAAF,EACAC,KAAAE,UAEAJ,EAAAK,WAAA,KACAL,EAAAM,aAAA,SAAAC,GACAP,EAAAK,WAAAE,EACAC,SAAAH,WAAAG,SAAAH,YAAAE,GAGAP,EAAAS,UAAAC,KAAA,OAEAV,EAAAS,UAAAE,KAAA,SAAAV,GACA,IAAA,GAAAW,KAAAV,MAAAC,aACAD,KAAAC,aAAAU,eAAAD,KAAAX,EAAAY,eAAAD,KACAX,EAAAW,GAAAV,KAAAC,aAAAS,GAIAV,MAAAE,OAAAO,KAAA,GAAAH,UAAAP,KAGAD,EAAAS,UAAAK,KAAA,SAAAb,GACA,GAAAc,GAAA,IAEAd,GAAAA,KAEA,KAAA,GAAAW,GAAAV,KAAAE,OAAAY,OAAA,EAAAJ,GAAA,IAAAA,EAAA,CACA,GAAAK,GAAAf,KAAAE,OAAAQ,GAEAM,GADAD,EAAAE,OACAF,EAAAG,QAEAH,GAAAE,OAAA,KAEAJ,GAAA,kBAAAA,GAAAM,KAIAN,EAAAM,KAAAJ,EAAAH,KAAAQ,KAAAL,EAAAhB,GAAAiB,GAHAH,EAAAE,EAAAH,KAAAb,GAQA,MAAAc,IAGAf,EAAAS,UAAAc,MAAA,WACArB,KAAAE,WAIA,mBAAAoB,SACAA,QAAAC,OAAAzB,EAGA0B,OAAA1B,cAAAA","file":"FuryCallStack.min.js","sourcesContent":["(function() {\n\n  function FuryCallStack(opts) {\n    var self = this;\n\n    this._defaultOpts = opts;\n    this._stack = [];\n  }\n  FuryCallStack._promiseFn = null;\n  FuryCallStack.setPromiseFn = function(fn) {\n    FuryCallStack._promiseFn = fn;\n    FuryCall._promiseFn = FuryCall._promiseFn || fn;\n  };\n\n  FuryCallStack.prototype.next = 'next';\n\n  FuryCallStack.prototype.push = function(opts) {\n    for (var i in this._defaultOpts) {\n      if (this._defaultOpts.hasOwnProperty(i) && !opts.hasOwnProperty(i)) {\n        opts[i] = this._defaultOpts[i];\n      }\n    }\n\n    this._stack.push(new FuryCall(opts));\n  };\n\n  FuryCallStack.prototype.exec = function(opts) {\n    var result = null;\n\n    opts = opts || {};\n\n    for (var i=this._stack.length-1; i>=0; --i) {\n      var call = this._stack[i],\n          nextCall = call._$then,\n          errorCall = call._$catch;\n\n      call._$then = null;\n\n      if (!result || typeof result.then !== 'function') {\n        result = call.exec(opts);\n      }\n      else {\n        result.then(call.exec.bind(call, opts), errorCall);\n      }\n\n    }\n\n    return result;\n  };\n\n  FuryCallStack.prototype.reset = function() {\n    this._stack = [];\n  };\n\n\n  if (typeof exports !== 'undefined') {\n    exports.module = FuryCallStack;\n  }\n  else {\n    window.FuryCallStack = FuryCallStack;\n  }\n\n})();"],"sourceRoot":"/source/"}